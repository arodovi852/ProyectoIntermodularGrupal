# ReccoBeats Integration Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          React Frontend (Vite)                           â”‚  â”‚
â”‚  â”‚  - App.jsx (Router)                                      â”‚  â”‚
â”‚  â”‚  - Generate.jsx (Main Page)                              â”‚  â”‚
â”‚  â”‚    â”œâ”€ SearchBar (search input)                           â”‚  â”‚
â”‚  â”‚    â”œâ”€ Sliders (8 audio controls)                         â”‚  â”‚
â”‚  â”‚    â”œâ”€ SongList (display selected songs)                  â”‚  â”‚
â”‚  â”‚    â””â”€ handleSearch() â†’ calls /api/search                 â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ SongList.jsx (NEW: Album Display)               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Liked Songs (max 5):                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ [Album Art]  Song Name                   âœ•  â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚              Artist Name                    â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚              Album Name (italic) â† NEW     â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Disliked Songs (max 5):                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ [Album Art]  Song Name                   âœ•  â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚              Artist Name                    â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â”‚              Album Name (italic) â† NEW     â”‚ â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â–²                                   â”‚
â”‚                            â”‚ HTTP                              â”‚
â”‚                            â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Axios Client
                             â”‚ (api.js service)
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Express)                           â”‚
â”‚                    PORT: 3001 / 4000                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  app.js                                               â”‚  â”‚
â”‚  â”‚  - CORS enabled (wildcard)                           â”‚  â”‚
â”‚  â”‚  - Routes mounted at /api                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  recco.js (Routes)                                    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  GET /api/search?q=<query>                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ Receives: search query from frontend           â”‚  â”‚
â”‚  â”‚  â”œâ”€ Action: Calls ReccoBeats API search endpoint   â”‚  â”‚
â”‚  â”‚  â”œâ”€ Maps Response:                                 â”‚  â”‚
â”‚  â”‚  â”‚  - track.id â†’ id                               â”‚  â”‚
â”‚  â”‚  â”‚  - track.name â†’ name                           â”‚  â”‚
â”‚  â”‚  â”‚  - track.artists[0].name â†’ artist              â”‚  â”‚
â”‚  â”‚  â”‚  - track.album_name â†’ album                    â”‚  â”‚
â”‚  â”‚  â”‚  - track.album_image_url â†’ image               â”‚  â”‚
â”‚  â”‚  â”‚  - track.preview_url â†’ preview_url             â”‚  â”‚
â”‚  â”‚  â”‚  - track.duration_ms â†’ duration_ms             â”‚  â”‚
â”‚  â”‚  â”œâ”€ Returns: JSON array of songs (max 20)          â”‚  â”‚
â”‚  â”‚  â””â”€ Error Handling: Fallback to mock if API fails  â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  POST /api/recommendations                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ Receives: slider values + song IDs            â”‚  â”‚
â”‚  â”‚  â”œâ”€ Action: Calls ReccoBeats recommendations API  â”‚  â”‚
â”‚  â”‚  â””â”€ Returns: Generated playlist recommendations    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  MongoDB (future: will store songs & playlists)          â”‚
â”‚  - Collections: songs, playlists, users                  â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                 â”‚
         â”‚                                 â”‚
         â”‚ axios.get()                     â”‚ (Future)
         â”‚                                 â”‚
         â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ReccoBeats API    â”‚         â”‚   MongoDB    â”‚
    â”‚  External Service  â”‚         â”‚   Database   â”‚
    â”‚                    â”‚         â”‚              â”‚
    â”‚  Endpoints:        â”‚         â”‚   Stores:    â”‚
    â”‚  - /search         â”‚         â”‚   - Songs    â”‚
    â”‚  - /recommendationsâ”‚         â”‚   - Playlistsâ”‚
    â”‚  - /audio-features â”‚         â”‚   - Users    â”‚
    â”‚                    â”‚         â”‚              â”‚
    â”‚  Returns:          â”‚         â”‚              â”‚
    â”‚  - Track data      â”‚         â”‚              â”‚
    â”‚  - Audio features  â”‚         â”‚              â”‚
    â”‚  - Images URLs     â”‚         â”‚              â”‚
    â”‚  - Preview URLs    â”‚         â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Request Flow Diagram

### Search Request Flow

```
USER INTERACTION
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User types "Bohemian Rhapsody" in search box   â”‚
â”‚ User presses ENTER                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  handleSearch()  â”‚
        â”‚  (Generate.jsx)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ api.get('/api/search', {              â”‚
        â”‚   params: { q: 'Bohemian Rhapsody' }  â”‚
        â”‚ })                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
                 NETWORK CALL
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ GET /api/search?q=Bohemian%20Rhapsody  â”‚
        â”‚ (Backend receives request)              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Check query parameter exists            â”‚
        â”‚ if (!q) return []                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ (q exists)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ axios.get(                              â”‚
        â”‚   'https://api.reccobeats.com/search',  â”‚
        â”‚   { params: { q: 'Bohemian Rhapsody' } â”‚
        â”‚ })                                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
                RECCOBEATS API
             (External Service)
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ReccoBeats searches database            â”‚
        â”‚ Returns tracks matching query           â”‚
        â”‚ Example response:                       â”‚
        â”‚ {                                       â”‚
        â”‚   "tracks": [                           â”‚
        â”‚     {                                   â”‚
        â”‚       "id": "queen-bohemian",          â”‚
        â”‚       "name": "Bohemian Rhapsody",     â”‚
        â”‚       "artists": [{                    â”‚
        â”‚         "name": "Queen"                â”‚
        â”‚       }],                              â”‚
        â”‚       "album": {                       â”‚
        â”‚         "name": "A Night at Opera",    â”‚
        â”‚         "images": [{                   â”‚
        â”‚           "url": "https://..."         â”‚
        â”‚         }]                             â”‚
        â”‚       },                               â”‚
        â”‚       "preview_url": "https://...",    â”‚
        â”‚       "duration_ms": 354000            â”‚
        â”‚     },                                 â”‚
        â”‚     ...more tracks...                  â”‚
        â”‚   ]                                    â”‚
        â”‚ }                                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Backend receives response               â”‚
        â”‚ Maps tracks to standard format:         â”‚
        â”‚ {                                       â”‚
        â”‚   id: "queen-bohemian",                â”‚
        â”‚   name: "Bohemian Rhapsody",           â”‚
        â”‚   artist: "Queen",                     â”‚
        â”‚   album: "A Night at Opera",           â”‚
        â”‚   image: "https://...",                â”‚
        â”‚   uri: "...",                          â”‚
        â”‚   preview_url: "https://...",          â”‚
        â”‚   duration_ms: 354000                  â”‚
        â”‚ }                                       â”‚
        â”‚                                        â”‚
        â”‚ Slices to max 20 results               â”‚
        â”‚ Returns JSON array                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
                NETWORK RETURN
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Frontend receives response              â”‚
        â”‚ res.data = [                            â”‚
        â”‚   {song1},                              â”‚
        â”‚   {song2},                              â”‚
        â”‚   ...                                   â”‚
        â”‚ ]                                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ setSearchResults()    â”‚
        â”‚ Updates state         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SearchBar renders results:           â”‚
        â”‚                                      â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ â”‚ [Album Cover] Bohemian Rhapsody â”‚ â”‚
        â”‚ â”‚             Queen                â”‚ â”‚
        â”‚ â”‚   â™¥               ğŸ‘              â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                      â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ â”‚ [Album Cover] Bohemian Rhapsody â”‚ â”‚
        â”‚ â”‚        (Remaster) - Queen        â”‚ â”‚
        â”‚ â”‚   â™¥               ğŸ‘              â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
                USER SEES
            Search results with:
            - Album artwork
            - Song name
            - Artist name
            - Like/Dislike buttons
```

### Selection and Display Flow

```
USER CLICKS â™¥ ON SONG
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleAddSong(song, 'liked')                â”‚
â”‚ (in Generate.jsx)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Check: likedSongs.length < 5       â”‚
        â”‚ Check: song not already liked      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“ (Both true)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ setLikedSongs([                    â”‚
        â”‚   ...likedSongs,                   â”‚
        â”‚   {                                â”‚
        â”‚     id: "queen-bohemian",         â”‚
        â”‚     name: "Bohemian Rhapsody",    â”‚
        â”‚     artist: "Queen",              â”‚
        â”‚     album: "A Night at Opera",    â”‚ â† NEW
        â”‚     image: "https://...",         â”‚
        â”‚     uri: "...",                   â”‚
        â”‚     preview_url: "https://...",   â”‚
        â”‚     duration_ms: 354000           â”‚
        â”‚   }                               â”‚
        â”‚ ])                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SongList re-renders                 â”‚
        â”‚ Receives updated likedSongs prop    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Map likedSongs array                â”‚
        â”‚ Create card for each song           â”‚
        â”‚                                    â”‚
        â”‚ For each song:                     â”‚
        â”‚   - Display song.image (album art) â”‚
        â”‚   - Display song.name              â”‚
        â”‚   - Display song.artist            â”‚
        â”‚   - Display song.album (NEW)       â”‚
        â”‚   - Show remove button             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ â¤ï¸ Canciones que te gustan (1/5) â”‚
        â”‚                                 â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚ â”‚ [Album Cover]  Bohemian âœ•   â”‚â”‚
        â”‚ â”‚                Rhapsody      â”‚â”‚
        â”‚ â”‚                Queen         â”‚â”‚
        â”‚ â”‚                A Night at    â”‚â”‚
        â”‚ â”‚                Opera (italic)â”‚â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App.jsx
â”œâ”€â”€ Router (React Router v7)
â”‚   â””â”€â”€ Routes
â”‚       â””â”€â”€ /generate
â”‚           â””â”€â”€ Generate.jsx (Main Page)
â”‚               â”œâ”€â”€ State:
â”‚               â”‚   â”œâ”€â”€ query (search text)
â”‚               â”‚   â”œâ”€â”€ searchResults (from API)
â”‚               â”‚   â”œâ”€â”€ likedSongs (selected)
â”‚               â”‚   â”œâ”€â”€ dislikedSongs (selected)
â”‚               â”‚   â”œâ”€â”€ 8 slider values
â”‚               â”‚   â””â”€â”€ loading
â”‚               â”‚
â”‚               â”œâ”€â”€ SearchBar
â”‚               â”‚   â””â”€â”€ Displays search input
â”‚               â”‚       and results (if any)
â”‚               â”‚       with â™¥ and ğŸ‘ buttons
â”‚               â”‚
â”‚               â”œâ”€â”€ Sliders (x8)
â”‚               â”‚   â””â”€â”€ Audio control sliders:
â”‚               â”‚       - Danceability
â”‚               â”‚       - Acousticness
â”‚               â”‚       - Energy
â”‚               â”‚       - Instrumentalness
â”‚               â”‚       - Loudness
â”‚               â”‚       - Mode
â”‚               â”‚       - Tempo
â”‚               â”‚       - Valence
â”‚               â”‚
â”‚               â””â”€â”€ SongList
â”‚                   â””â”€â”€ Displays:
â”‚                       â”œâ”€â”€ Liked Songs Group
â”‚                       â”‚   â””â”€â”€ Song Cards (max 5)
â”‚                       â”‚       â”œâ”€â”€ Image
â”‚                       â”‚       â”œâ”€â”€ Name
â”‚                       â”‚       â”œâ”€â”€ Artist
â”‚                       â”‚       â”œâ”€â”€ Album (NEW)
â”‚                       â”‚       â””â”€â”€ Remove button
â”‚                       â”‚
â”‚                       â””â”€â”€ Disliked Songs Group
â”‚                           â””â”€â”€ Song Cards (max 5)
â”‚                               â”œâ”€â”€ Image
â”‚                               â”œâ”€â”€ Name
â”‚                               â”œâ”€â”€ Artist
â”‚                               â”œâ”€â”€ Album (NEW)
â”‚                               â””â”€â”€ Remove button
```

## Data Structure

### Song Object (from ReccoBeats)

```javascript
{
  // Song identifier
  id: "spotify-track-id" || "reccobeats-uri" || "unique-id",
  
  // Display information
  name: "Bohemian Rhapsody",           // Song title
  artist: "Queen",                     // Primary artist name
  album: "A Night at the Opera",       // Album name (NEW)
  image: "https://example.com/image.jpg", // Album cover image
  
  // Extra data (for future features)
  uri: "spotify:track:...",            // Full URI
  preview_url: "https://example.com/preview.mp3", // 30s preview
  duration_ms: 354000,                 // Duration in milliseconds
  
  // Backend will add these later
  _id: "mongodb-id",                   // (for MongoDB)
  album_image_url: "https://...",      // (alternate field)
  artists: ["Queen", "Freddie Mercury"], // (array format)
  spotify_url: "https://open.spotify.com/track/...", // Direct link
}
```

### API Response Format

```javascript
// GET /api/search?q=Bohemian
// Returns: Array of songs
[
  {
    id: "...",
    name: "...",
    artist: "...",
    album: "...",
    image: "...",
    uri: "...",
    preview_url: "...",
    duration_ms: ...
  },
  // ... more songs
]
```

## Error Handling Flow

```
User searches
     â†“
Backend calls ReccoBeats API
     â†“
     â”œâ”€ Success
     â”‚  â””â”€ Return song data
     â”‚     â””â”€ Frontend displays results
     â”‚
     â””â”€ Error (Network, Timeout, API Down)
        â””â”€ Catch error
           â””â”€ Log error to console
              â””â”€ Return mock fallback results
                 â””â”€ Frontend displays mock data with same structure
                    â””â”€ User can continue testing UI
```

## Integration Points

### Frontend â†” Backend
- **Endpoint:** `/api/search`
- **Method:** GET
- **Params:** `q` (search query)
- **Response:** Array of songs

### Backend â†” ReccoBeats
- **Endpoint:** `https://api.reccobeats.com/search`
- **Method:** GET
- **Params:** `q` (search query)
- **Response:** Tracks array with metadata

## Technology Stack

```
Frontend:
â”œâ”€â”€ React 19.1.1
â”œâ”€â”€ Vite (bundler)
â”œâ”€â”€ React Router v7.9.5
â”œâ”€â”€ Axios (HTTP client)
â”œâ”€â”€ Bootstrap 5.3.8 + react-bootstrap
â””â”€â”€ CSS Modules

Backend:
â”œâ”€â”€ Node.js
â”œâ”€â”€ Express 4.21.2
â”œâ”€â”€ MongoDB (Mongoose 8.20.0)
â”œâ”€â”€ Axios 1.6.2 (for external API calls)
â”œâ”€â”€ JWT for auth
â”œâ”€â”€ CORS enabled
â””â”€â”€ Environment: .env config

External:
â””â”€â”€ ReccoBeats API (music search & recommendations)
```

This architecture ensures clean separation of concerns while enabling real-time music search and recommendation generation!
